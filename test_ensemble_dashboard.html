<!DOCTYPE html>
<html>
<head>
    <title>Ensemble Dashboard Test</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #001122; color: white; }
        .test-result { padding: 10px; margin: 10px 0; border-radius: 5px; }
        .success { background: #004400; border: 1px solid #00ff00; }
        .error { background: #440000; border: 1px solid #ff0000; }
        .loading { background: #444400; border: 1px solid #ffff00; }
        button { padding: 10px 20px; margin: 5px; background: #0066cc; color: white; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background: #0088ff; }
    </style>
</head>
<body>
    <h1>🛰️ Ensemble Dashboard Test Suite</h1>
    
    <h2>API Tests:</h2>
    <div id="api-tests"></div>
    
    <h2>Quick Actions:</h2>
    <button onclick="testAPI()">Test API Connection</button>
    <button onclick="window.open('simple_new.html', '_blank')">Open Ensemble Dashboard</button>
    <button onclick="simulateLoad()">Simulate Data Load</button>
    
    <h2>Expected Dashboard Features:</h2>
    <ul>
        <li>✅ Real-time mission time updates</li>
        <li>✅ Dynamic ensemble model status</li>
        <li>✅ Animated confidence meter (87%)</li>
        <li>✅ CME event analysis (1 event)</li>
        <li>✅ Risk level indicators (MODERATE)</li>
        <li>✅ Auto-refresh every 30 seconds</li>
        <li>✅ Physics + ML + Neural Networks active</li>
    </ul>

    <script>
        async function testAPI() {
            const container = document.getElementById('api-tests');
            container.innerHTML = '<div class="loading test-result">Testing API endpoints...</div>';
            
            const tests = [
                { name: 'Simple Forecast API', url: 'http://localhost:9001/api/v1/forecasts/simple' },
                { name: 'System Status API', url: 'http://localhost:9001/api/v1/system/status' },
                { name: 'Root API', url: 'http://localhost:9001/' }
            ];
            
            let results = '';
            
            for (const test of tests) {
                try {
                    const response = await fetch(test.url);
                    const data = await response.json();
                    
                    if (response.ok && (data.success !== false)) {
                        results += `<div class="success test-result">✅ ${test.name}: Working</div>`;
                        
                        if (test.name === 'Simple Forecast API' && data.data) {
                            const forecast = data.data.forecasts?.[0];
                            if (forecast) {
                                results += `<div class="success test-result">
                                    📊 Forecast Data: ${forecast.event} event, ${Math.round(forecast.confidence * 100)}% confidence
                                    <br>Risk: ${forecast.risk_summary}
                                    <br>Model: ${data.data.model_type}
                                </div>`;
                            }
                        }
                    } else {
                        results += `<div class="error test-result">❌ ${test.name}: Failed (${response.status})</div>`;
                    }
                } catch (error) {
                    results += `<div class="error test-result">❌ ${test.name}: Error - ${error.message}</div>`;
                }
            }
            
            container.innerHTML = results;
        }
        
        function simulateLoad() {
            const container = document.getElementById('api-tests');
            container.innerHTML = `
                <div class="loading test-result">🔄 Simulating ensemble dashboard load...</div>
                <div class="success test-result">⚡ Physics models initialized</div>
                <div class="success test-result">🧠 ML algorithms activated</div>
                <div class="success test-result">🔗 Neural networks connected</div>
                <div class="success test-result">📡 Live data streaming</div>
                <div class="success test-result">✅ Ensemble consensus achieved</div>
            `;
            
            setTimeout(() => {
                container.innerHTML += '<div class="success test-result">🚀 Dashboard ready! All systems operational.</div>';
            }, 2000);
        }
        
        // Auto-test on load
        testAPI();
    </script>
</body>
</html>